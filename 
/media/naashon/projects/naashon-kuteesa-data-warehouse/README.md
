
# Naashon Kuteesa Data Warehouse

A production-ready e-commerce data warehouse deployed on Vercel with Neon PostgreSQL and mobile money payment integration.

## ğŸŒŸ Features

- **ğŸ’° Mobile Money Payments** - Accept M-Pesa, Airtel Money, and other mobile payment methods
- **ğŸ“Š Analytics Dashboard** - Real-time sales analytics and customer insights
- **ğŸ›ï¸ Product Catalog** - Full product management with images and pricing
- **ğŸ›’ Shopping Cart** - Complete checkout flow with payment processing
- **ğŸ“ˆ ETL Pipeline** - Process and analyze sales data from CSV
- **ğŸš€ Serverless Architecture** - Auto-scaling on Vercel with Neon PostgreSQL

## ğŸ› ï¸ Tech Stack

- **Frontend**: Next.js 14 (App Router), React, Tailwind CSS
- **Backend**: Vercel Serverless Functions
- **Database**: Neon PostgreSQL (Serverless)
- **Charts**: Recharts
- **Payments**: Mobile Money (M-Pesa ready)

## ğŸ“ Project Structure

```
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ analytics/      # Dashboard analytics API
â”‚   â”‚   â”œâ”€â”€ etl/            # ETL processing API
â”‚   â”‚   â”œâ”€â”€ payments/       # Payment initiation & verification
â”‚   â”‚   â”œâ”€â”€ products/       # Product CRUD API
â”‚   â”‚   â””â”€â”€ sales/          # Sales API
â”‚   â”œâ”€â”€ checkout/           # Checkout page with mobile money
â”‚   â”œâ”€â”€ products/          # Product catalog page
â”‚   â””â”€â”€ page.tsx           # Main dashboard
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ db.ts              # Database connection
â”‚   â”œâ”€â”€ schema.sql         # PostgreSQL schema
â”‚   â””â”€â”€ init-db.ts         # Database initialization
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts           # TypeScript types
â””â”€â”€ vercel.json            # Vercel configuration
```

## ğŸš€ Getting Started

### 1. Install Dependencies

```bash
npm install
```

### 2. Set Up Neon Database

1. Create a free account at [Neon.tech](https://neon.tech)
2. Create a new project: `naashon-kuteesa`
3. Get your connection string from the dashboard

### 3. Configure Environment Variables

Copy `.env.example` to `.env.local` and add your credentials:

```bash
cp .env.example .env.local
```

Add your DATABASE_URL:
```
DATABASE_URL="postgresql://user:password@ep-xxx.us-east-1.aws.neon.tech/naashon_kuteesa?sslmode=require"
```

### 4. Initialize Database

Run the SQL schema or use the API:

```bash
# Via API
curl -X POST http://localhost:3000/api/etl -H "Content-Type: application/json" -d '{"action": "initialize"}'
```

### 5. Start Development Server

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000)

## ğŸ“± Mobile Money Payment Integration

### M-Pesa Setup (Kenya)

1. Register for M-Pesa Business API at [M-Pesa Developer Portal](https://developer.safaricom.co.ke)
2. Get your Consumer Key and Consumer Secret
3. Configure STK Push or C2B callbacks

### Payment Flow

1. Customer selects products and clicks "Buy Now"
2. Customer enters phone number
3. System creates payment record
4. Payment request sent to mobile money provider
5. Customer completes payment on phone
6. Webhook confirms payment
7. Order status updated to "completed"

## ğŸ“Š API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/analytics` | GET | Dashboard analytics |
| `/api/products` | GET/POST | Products CRUD |
| `/api/sales` | GET/POST | Sales management |
| `/api/sales/by-customer` | GET | Customer sales summary |
| `/api/sales/trend` | GET | Daily sales trend |
| `/api/payments` | GET/POST | Payment initiation |
| `/api/payments/verify` | POST | Payment verification |
| `/api/etl` | GET/POST | ETL operations |

## ğŸ’° Pricing

| Service | Plan | Monthly Cost |
|---------|------|-------------|
| Vercel | Pro | $20/month |
| Neon | Pro | $19/month |
| **Total** | | **~$39/month** |

Free tiers available for testing!

## ğŸŒ Deployment to Vercel

### 1. Push to GitHub

```bash
git init
git add .
git commit -m "Initial commit"
gh repo create
git push origin main
```

### 2. Connect to Vercel

1. Go to [Vercel Dashboard](https://vercel.com)
2. Import your GitHub repository
3. Add environment variables:
   - `DATABASE_URL` (from Neon)
   - `MPESA_CONSUMER_KEY` (optional)
   - `MPESA_CONSUMER_SECRET` (optional)
4. Deploy!

### 3. Configure Neon

1. Go to Neon Dashboard
2. Add Vercel as a connection
3. Enable branch protection for production

## ğŸ“ˆ Features Breakdown

### Dashboard
- Revenue metrics with trend charts
- Order statistics
- Customer insights
- Payment status overview

### Products
- Product catalog with images
- Category filtering
- Stock management
- Price tags

### Sales
- Order management
- Customer tracking
- Sales history
- ETL from CSV

### Payments
- Mobile money integration
- Payment verification
- Transaction history
- Webhook support

## ğŸ”’ Security

- Environment variables for sensitive data
- SSL/TLS encryption (Neon)
- Input validation on all forms
- CORS protection

## ğŸ“ License

MIT License - Feel free to use for your projects!

## ğŸ¤ Support

For questions or support, please open an issue on GitHub.

---

Built with â¤ï¸ for the African market

